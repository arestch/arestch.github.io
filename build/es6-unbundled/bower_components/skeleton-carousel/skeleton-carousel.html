<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="import" href="../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../iron-selector/iron-selector.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../iron-icons/iron-icons.html"></head><body><dom-module id="skeleton-carousel"><template><style>:host{display:block;position:relative;overflow:hidden;contain:content;box-sizing:border-box;@apply --layout-flex-auto;@apply --skeleton-carousel;min-height:var(--skeleton-carousel-min-height, 300px);}:host([direction="horizontal"]){@apply --layout-vertical;}:host([alt][direction="horizontal"]){@apply --layout-vertical-reverse;}:host([direction="vertical"]){@apply --layout-inline;@apply --layout-horizontal;}:host([alt][direction="vertical"]){@apply --layout-horizontal-reverse;}:host,
      #carousel *,
      #container ::slotted(*){-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);}#carousel,
      #items,
      #container{display:block;position:relative;width:100%;@apply --layout-flex-auto;}#carousel,
      #container{@apply --layout-vertical;}#carousel{overflow:hidden;z-index:0;}#items{position:relative;-webkit-transform:translate3d(0%, 0%, 0);-moz-transform:translate3d(0%, 0%, 0);-ms-transform:translate3d(0%, 0%, 0);-o-transform:translate3d(0%, 0%, 0);transform:translate3d(0%, 0%, 0);will-change:transform;}:host([direction="horizontal"]) #items{@apply --layout-vertical;}:host([direction="vertical"]) #items{@apply --layout-fit;}#container{@apply --layout-inline;@apply --skeleton-carousel-container;}:host([direction="horizontal"]) #container{@apply --layout-horizontal;@apply --skeleton-carousel-container-horizontal;}:host([direction="vertical"]) #container{@apply --layout-vertical;@apply --layout-wrap;@apply --skeleton-carousel-container-vertical;}#container ::slotted(*){display:block;position:relative;overflow:hidden;@apply --layout-vertical;@apply --layout-flex-auto;min-width:100%;max-width:100%;width:100%;will-change:auto;opacity:.8;@apply --skeleton-carousel-item;}#container ::slotted(.selected){opacity:1;@apply --skeleton-carousel-item-selected;}#controls{display:block;padding:.5rem;z-index:1;@apply --layout-center-center;@apply --layout-center-justified;@apply --skeleton-carousel-controls;}:host([direction="horizontal"]) #controls{@apply --skeleton-carousel-controls-horizontal;}:host([direction="vertical"]) #controls{@apply --skeleton-carousel-controls-vertical;}:host([direction="horizontal"]) #controls,
      :host([direction="horizontal"]) #dots{@apply --layout-horizontal;}:host([direction="vertical"]) #controls,
      :host([direction="vertical"]) #dots{@apply --layout-vertical;}paper-icon-button{border-radius:50%;}#dots{@apply --layout-flex-auto;@apply --layout-center-center;@apply --skeleton-carousel-dots;}#dots paper-icon-button{color:var(--skeleton-carousel-dot-color, var(--paper-grey-900));opacity:.4;@apply --skeleton-carousel-dot;}#dots paper-icon-button.selected{opacity:1;@apply --skeleton-carousel-dot-selected;}#dots paper-icon-button[disabled]{opacity:.4;@apply --skeleton-carousel-dot-disabled;}#prev,
      #next{color:var(--skeleton-carousel-nav-color, var(--paper-grey-900));}#prev,
      #next{@apply --skeleton-carousel-nav;}#prev[disabled],
      #next[disabled]{color:var(--skeleton-carousel-nav-disabled-color, var(--paper-grey-600));@apply --skeleton-carousel-nav-disabled;}#prev{@apply --skeleton-carousel-nav-prev;}#next{@apply --skeleton-carousel-nav-next;}[hidden]{display:none !important;}#items,
      #container ::slotted(*),
      paper-icon-button{-webkit-transition:all 300ms cubic-bezier(.51, .92, .24, 1);-moz-transition:all 300ms cubic-bezier(.51, .92, .24, 1);-ms-transition:all 300ms cubic-bezier(.51, .92, .24, 1);-o-transition:all 300ms cubic-bezier(.51, .92, .24, 1);transition:all 300ms cubic-bezier(.51, .92, .24, 1);@apply --skeleton-carousel-transition;}:host[swiping] #items{-webkit-transition:all 300ms linear;-moz-transition:all 300ms linear;-ms-transition:all 300ms linear;-o-transition:all 300ms linear;transition:all 300ms linear;}</style><div id="carousel" on-track="_drag"><div id="items"><iron-selector id="container" selected="{{selected}}" fallback-selection="0" selected-class="selected" style$="[[_containerHeight]]"><slot></slot></iron-selector></div></div><nav id="controls" hidden$="[[!_controls]]"><paper-icon-button icon$="[[_iconPrev]]" id="prev" on-tap="prev" disabled$="[[!showPrev]]" hidden$="[[!nav]]"></paper-icon-button><iron-selector id="dots" selected="{{selected}}" fallback-selection="0" selected-class="selected" hidden$="[[!dots]]" tabindex="-1"><template is="dom-repeat" items="[[_dots]]"><paper-icon-button icon="[[_iconDot(item, selected)]]" disabled$="[[disabled]]"></paper-icon-button></template></iron-selector><paper-icon-button icon$="[[_iconNext]]" id="next" on-tap="next" disabled$="[[!showNext]]" hidden$="[[!nav]]"></paper-icon-button></nav></template><script>class SkeletonCarousel extends Polymer.mixinBehaviors([Polymer.IronA11yKeysBehavior],Polymer.Element){static get is(){return'skeleton-carousel'}static get properties(){return{animating:{type:Boolean,value:!1,readOnly:!0,reflectToAttribute:!0,notify:!0},auto:{type:Boolean,value:!1,observer:'_autoAnimate'},direction:{type:String,value:'horizontal',reflectToAttribute:!0},disabled:{type:Boolean,value:!1},dots:{type:Boolean,value:!1},disableSwipe:{type:Boolean,value:!1},disableKeys:{type:Boolean,value:!1},duration:{type:Number,value:4e3},loop:{type:Boolean,value:!1},nav:{type:Boolean,value:!1},selected:{type:Number,value:0,notify:!0,reflectToAttribute:!0,observer:'_selectedObserver'},selectedItem:{type:Object,notify:!0,readOnly:!0},swiping:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},tabindex:{type:Number,value:0,reflectToAttribute:!0},total:{type:Number,value:0,notify:!0,reflectToAttribute:!0,readOnly:!0},end:{type:Boolean,value:!1,notify:!0,readOny:!0,reflectToAttribute:!0,computed:'_computeEnd(total, selected)'},showNext:{type:Boolean,value:!1,computed:'_computeShowNext(disabled, total, selected, loop)',notify:!0,reflectToAttribute:!0,readOnly:!0},showPrev:{type:Boolean,value:!1,computed:'_computeShowPrev(disabled, selected, loop)',notify:!0,reflectToAttribute:!0,readOnly:!0},_autoInterval:{type:Object},_children:{type:Array,value:[],observer:'_childrenObserver'},_controls:{type:Boolean,value:!1,readOnly:!0,computed:'_computeControls(dots, nav, total)'},_dots:{type:Array,computed:'_computeDots(total)',readOnly:!0,value:[]},_iconPrev:{type:String,value:'icons:arrow-back',readOnly:!0,computed:'_computeIconPrev(direction)'},_iconNext:{type:String,value:'icons:arrow-forward',readOnly:!0,computed:'_computeIconNext(direction)'},_containerHeight:{type:String,value:'height: 100%;',computed:'_computeContainerHeight(direction, total)',readOnly:!0},_x:{type:Number,value:0},_y:{type:Number,value:0}}}connectedCallback(){super.connectedCallback();const a=this.shadowRoot.querySelector('slot');new Polymer.FlattenedNodesObserver(a,()=>{this._children=Polymer.FlattenedNodesObserver.getFlattenedNodes(this).filter((a)=>a.nodeType===Node.ELEMENT_NODE&&'DOM-REPEAT'!==a.nodeName&&'TEMPLATE'!==a.nodeName)});const b=this.shadowRoot.querySelector('#items');b.addEventListener('transitionend',(a)=>{a.preventDefault();this.swiping||'transform'!==a.propertyName||this._setAnimating(!1)})}static get observers(){return['_translateObserver(direction, selected, _x, _y)']}get keyBindings(){return{"left up":'_prevKey',"right down":'_nextKey'}}_childrenObserver(a){this._setTotal(a.length),this._lazyContent(0),1<=a.length&&this._lazyContent(1)}_prevKey(a){if(!(this.disableKeys||this.disabled))return a.preventDefault(),this.prev()}_nextKey(a){if(!(this.disableKeys||this.disabled))return a.preventDefault(),this.next()}_autoAnimate(a){a?this._autoInterval=setInterval(()=>{this.next()},this.duration):clearInterval(this._autoInterval)}next(){if(!this.disabled){const a=this.shadowRoot.querySelector('#container');(this.selected<--this.total||this.loop)&&(this._setAnimating(!0),a.selectNext())}}prev(){if(!this.disabled){const a=this.shadowRoot.querySelector('#container');(0<this.selected||this.loop)&&(this._setAnimating(!0),a.selectPrevious())}}_iconDot(a,b){a--;let c='icons:radio-button-unchecked';return+a===+b&&(c='icons:radio-button-checked'),c}_selectedObserver(a){this._lazyContent(a);let b=this._children[a];this._setSelectedItem(b),a<--this.total&&this._lazyContent(++a),this._autoAnimate(!1),this._autoAnimate(this.auto)}_lazyContent(a){const b=this._children[a];if(b){b.hasAttribute('data-src')&&(b.src=b.getAttribute('data-src'),b.removeAttribute('data-src'));const a=b.querySelectorAll('[data-src]');if(!(0>=a.length)){let b=0;for(b;b<a.length;++b)a[b].src=a[b].getAttribute('data-src'),a[b].removeAttribute('data-src')}}}_computeShowNext(a,b,c,d){return!a&&(!!d||c<--b)}_computeShowPrev(a,b,c){return!a&&(!!c||0<b)}_computeDots(a){let b=[];if(0>=a)return b;let c=1;for(a=++a,c;c<a;++c)b.push(c);return b}_computeEnd(a,b){const c=b===--a;return c&&this._event('end'),c}_normalize(a){return 0>a?a=0:1<a&&(a=1),a}_calcPercentage(a){return a=a.toFixed(2),`${100*a}%`}_drag(a){if(this.disableSwipe||this.disabled)return this._x=0,this._y=0,void this._setSwiping(!1);const b=this.offsetWidth,c=this.offsetHeight,d=a.detail.ddx?a.detail.ddx:0,e=a.detail.ddy?a.detail.ddy:0;let f=0,g=0;'horizontal'===this.direction&&(f=this._x+d/b),'vertical'===this.direction&&(g=this._y+e/c);let h=+f,i=+g;switch(this.showPrev||(0<h&&(h=0),0<i&&(i=0)),this.showNext||(0>h&&(h=0),0>i&&(i=0)),a.detail.state){case'track':this._autoAnimate(!1),this._x=h,this._y=i,this._setSwiping(!0);break;case'end':this._autoAnimate(this.auto),this._x=0,this._y=0,this._setSwiping(!1),0.1<=h||0.1<=i?this.prev():(-0.1>=h||-0.1>=i)&&this.next();}}_computeIconPrev(a){return'vertical'===a?'icons:arrow-upward':'icons:arrow-back'}_computeIconNext(a){return'vertical'===a?'icons:arrow-downward':'icons:arrow-forward'}_translateObserver(a,b,c,d){(0!==c||0!==d)&&this._setAnimating(!0);let e=0,f=0,g=-Math.abs(b);if(0>=b&&(g=0),0===c&&0===d){const b=this._calcPercentage(g);'horizontal'===a&&(e=b),'vertical'===a&&(f=b)}else c=g+c,d=g+d,'horizontal'===a&&(e=this._calcPercentage(c)),'vertical'===a&&(f=this._calcPercentage(d));const h=this.shadowRoot.querySelector('#items');let i='';'horizontal'===a&&(i=`translateX(${e})`),'vertical'===a&&(i=`translateY(${f})`),h.style.webkitTransform=i,h.style.MozTransform=i,h.style.msTransform=i,h.style.OTransform=i,h.style.transform=i}_returnDragPosition(a,b){return a-b}_computeContainerHeight(a,b){let c='auto';return'vertical'===a&&(c=this._calcPercentage(b)),`height: ${c};`}_computeControls(a,b,c){return 1<c&&(a||b)}_event(a,b=null){this.dispatchEvent(new CustomEvent(a,{detail:b,bubbles:!0,composed:!0}))}}window.customElements.define(SkeletonCarousel.is,SkeletonCarousel);</script></dom-module></body></html>